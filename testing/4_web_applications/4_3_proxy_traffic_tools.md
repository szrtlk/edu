## ИНСТРУМЕНТЫ ПРОКСИ ТРАФИКА

### СНИФФИНГ ТРАФИКА
* сниффинг трафика - процесс мониторинга и перехвата всех пакетов (запросов), проходящих через сеть, с помощью инструментов сниффинга
* для работы с протоколом HTTPS необходима установка дополнительных сертификатов

### ИНСТРУМЕНТЫ ПРОКСИ ТРАФИКА
* Fiddler Classic (только для WIndows)
* Fiddler Everywhere
* Charles Proxy
* Mitmproxy (только для MacOS)
* Proxyman (только для MacOS)

### НАСТРОЙКА CHARLES PROXY
* настройка показана на примере MacOS
* установка сертификата в **Charles Proxy** (Help -> SSL Proxying -> Install Charles Root Certificate, далее открывается Keychain Access, далее выбор сертификата, далее вкладка "Доверие", далее выбор "Всегда доверять")
* отключение проксирования компьютера в **Charles Proxy** (Proxy ->  macOS Proxy, снятие галочки; или Proxy -> Proxy Settings, далее вкладка "macOS", далее снимаем галочки "Enable macOS proxy" и "Enable macOS proxy on launch")
* указываем то, что мы будем проксировать в **Charles Proxy** (Proxy -> SSL Proxying Settings, далее вкладка "SSL Proxying", далее ставим галочку "Enable SSL Proxying", далее выбираем в разделе "Inculde" хост (location), если указать *, то будут выбраны все хосты)
* установка сертификата в **браузере**, на примере **Mozilla Firefox** (Настройки, далее раздел "Параметры сети", далее кнопка "Настроить", далее выбор "Ручная настройка Proxy", далее указываем IP-адрес для HTTP прокси и HTTPS прокси и порт 8888)
* IP-адрес можно посмотреть в **Charles Proxy** (Help -> Local IP Addresses)
* после этого в **Charles Proxy** появится уведомление "Connection from...", разрешаем входящее соединение
* после этого в **браузере** заходим на сайт chls.pro/ssl, далее открывается Keychain Access, далее выбор сертификата, далее вкладка "Доверие", далее выбор "Всегда доверять"

### РАБОТА С CHARLES PROXY
* открываем в **браузере** веб-приложение
* после этого в **Charles Proxy** отображаются запросы веб-приложения
* список запросов можно почистить (кнопка со знаком метлы), после чего обновить вкладку или запустить новое веб-приложение
* можно выбрать структуру отображения в **Charles Proxy** (Structure или Sequence)
* для поиска и выбора необходимого запроса можно использовать поле "Filter"
* вкладка "Overview" содержит параметры запроса (URL, статус, код запроса, протокол, метод запроса, данные сервера (хост, IP, порт), данные клиента (IP, порт), формат общения клиента и сервера и прочее)
* вкладка "Request" содержит заголовки запроса
* вкладка "Response" содержит ответ в выбранном формате (можно выбрать JSON, JSON Text или другой формат, также можно посмотреть заголовки ответа (Headers))

